{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import'./App.css';// Import components\nimport AuthPage from'./components/AuthPage';import Dashboard from'./components/Dashboard';import Contacts from'./components/Contacts';import ContactDetail from'./components/ContactDetail';import Reminders from'./components/Reminders';import MessageComposer from'./components/MessageComposer';import Analytics from'./components/Analytics';import Navbar from'./components/Navbar';// API utilities\nimport{setAuthToken,getAuthToken}from'./utils/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{// Check if user is already logged in\nconst token=getAuthToken();if(token){setAuthToken(token);fetchUserInfo();}else{setLoading(false);}},[]);const fetchUserInfo=async()=>{try{const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const response=await fetch(\"\".concat(BACKEND_URL,\"/api/auth/me\"),{headers:{'Authorization':\"Bearer \".concat(getAuthToken())}});if(response.ok){const userData=await response.json();setUser(userData);setIsAuthenticated(true);}else{localStorage.removeItem('token');setIsAuthenticated(false);}}catch(error){console.error('Error fetching user info:',error);setIsAuthenticated(false);}finally{setLoading(false);}};const handleLogin=(userData,token)=>{localStorage.setItem('token',token);setAuthToken(token);setUser(userData);setIsAuthenticated(true);toast.success('Welcome back!');};const handleLogout=()=>{localStorage.removeItem('token');setAuthToken(null);setUser(null);setIsAuthenticated(false);toast.info('Logged out successfully');};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading...\"})]})});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(ToastContainer,{position:\"top-right\",autoClose:3000}),!isAuthenticated?/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/auth\",element:/*#__PURE__*/_jsx(AuthPage,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/auth\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{user:user,onLogout:handleLogout}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-16\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/contacts\",element:/*#__PURE__*/_jsx(Contacts,{})}),/*#__PURE__*/_jsx(Route,{path:\"/contacts/:contactId\",element:/*#__PURE__*/_jsx(ContactDetail,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reminders\",element:/*#__PURE__*/_jsx(Reminders,{})}),/*#__PURE__*/_jsx(Route,{path:\"/message/:contactId\",element:/*#__PURE__*/_jsx(MessageComposer,{})}),/*#__PURE__*/_jsx(Route,{path:\"/analytics\",element:/*#__PURE__*/_jsx(Analytics,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"})})]})})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","ToastContainer","toast","AuthPage","Dashboard","Contacts","ContactDetail","Reminders","MessageComposer","Analytics","Navbar","setAuthToken","getAuthToken","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","isAuthenticated","setIsAuthenticated","user","setUser","loading","setLoading","token","fetchUserInfo","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","response","fetch","concat","headers","ok","userData","json","localStorage","removeItem","error","console","handleLogin","setItem","success","handleLogout","info","className","children","position","autoClose","path","element","onLogin","to","onLogout"],"sources":["/app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.css';\n\n// Import components\nimport AuthPage from './components/AuthPage';\nimport Dashboard from './components/Dashboard';\nimport Contacts from './components/Contacts';\nimport ContactDetail from './components/ContactDetail';\nimport Reminders from './components/Reminders';\nimport MessageComposer from './components/MessageComposer';\nimport Analytics from './components/Analytics';\nimport Navbar from './components/Navbar';\n\n// API utilities\nimport { setAuthToken, getAuthToken } from './utils/api';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Check if user is already logged in\n    const token = getAuthToken();\n    if (token) {\n      setAuthToken(token);\n      fetchUserInfo();\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  const fetchUserInfo = async () => {\n    try {\n      const BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\n      const response = await fetch(`${BACKEND_URL}/api/auth/me`, {\n        headers: {\n          'Authorization': `Bearer ${getAuthToken()}`\n        }\n      });\n      \n      if (response.ok) {\n        const userData = await response.json();\n        setUser(userData);\n        setIsAuthenticated(true);\n      } else {\n        localStorage.removeItem('token');\n        setIsAuthenticated(false);\n      }\n    } catch (error) {\n      console.error('Error fetching user info:', error);\n      setIsAuthenticated(false);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleLogin = (userData, token) => {\n    localStorage.setItem('token', token);\n    setAuthToken(token);\n    setUser(userData);\n    setIsAuthenticated(true);\n    toast.success('Welcome back!');\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    setAuthToken(null);\n    setUser(null);\n    setIsAuthenticated(false);\n    toast.info('Logged out successfully');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Router>\n      <div className=\"min-h-screen bg-gray-50\">\n        <ToastContainer position=\"top-right\" autoClose={3000} />\n        \n        {!isAuthenticated ? (\n          <Routes>\n            <Route path=\"/auth\" element={<AuthPage onLogin={handleLogin} />} />\n            <Route path=\"*\" element={<Navigate to=\"/auth\" />} />\n          </Routes>\n        ) : (\n          <>\n            <Navbar user={user} onLogout={handleLogout} />\n            <div className=\"pt-16\">\n              <Routes>\n                <Route path=\"/dashboard\" element={<Dashboard user={user} />} />\n                <Route path=\"/contacts\" element={<Contacts />} />\n                <Route path=\"/contacts/:contactId\" element={<ContactDetail />} />\n                <Route path=\"/reminders\" element={<Reminders />} />\n                <Route path=\"/message/:contactId\" element={<MessageComposer />} />\n                <Route path=\"/analytics\" element={<Analytics />} />\n                <Route path=\"*\" element={<Navigate to=\"/dashboard\" />} />\n              </Routes>\n            </div>\n          </>\n        )}\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}